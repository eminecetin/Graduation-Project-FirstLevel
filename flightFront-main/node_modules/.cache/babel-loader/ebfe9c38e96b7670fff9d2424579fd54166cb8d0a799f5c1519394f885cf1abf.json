{"ast":null,"code":"var _jsxFileName = \"/Users/eminecetin/Downloads/flightFront-main/src/contexts/AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useState, createContext, useContext, useEffect } from \"react\";\nimport { Flex, Spinner } from \"@chakra-ui/react\";\nimport { fetchLogout, fetchMe } from \"../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nconst AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    let isMounted = true;\n    const fetchData = async () => {\n      try {\n        const me = await fetchMe();\n        if (isMounted) {\n          setLoggedIn(true);\n          setUser(me);\n          setLoading(false);\n        }\n      } catch (e) {\n        if (isMounted) {\n          setLoading(false);\n        }\n      }\n    };\n    fetchData();\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  const login = data => {\n    setLoggedIn(true);\n    setUser(data);\n    localStorage.setItem('access-token', data.accessToken);\n    localStorage.setItem('refresh-token', data.refreshToken);\n  };\n  const logout = async () => {\n    setLoggedIn(false);\n    setUser(null);\n    await fetchLogout();\n    localStorage.removeItem('access-token');\n    localStorage.removeItem('refresh-token');\n  };\n  const values = {\n    loggedIn,\n    user,\n    login,\n    logout\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Flex, {\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      height: \"100vh\",\n      children: /*#__PURE__*/_jsxDEV(Spinner, {\n        thickness: \"4px\",\n        speed: \"0.65s\",\n        emptyColor: \"gray.200\",\n        size: \"xl\",\n        color: \"red.500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: values,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 10\n  }, this);\n};\n_s(AuthProvider, \"evkwBE5+knMALQwVVq7ftrK2laE=\");\n_c = AuthProvider;\nconst useAuth = () => {\n  _s2();\n  return useContext(AuthContext);\n};\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport { AuthProvider, useAuth };\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["useState","createContext","useContext","useEffect","Flex","Spinner","fetchLogout","fetchMe","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","user","setUser","loggedIn","setLoggedIn","loading","setLoading","isMounted","fetchData","me","e","login","data","localStorage","setItem","accessToken","refreshToken","logout","removeItem","values","justifyContent","alignItems","height","thickness","speed","emptyColor","size","color","fileName","_jsxFileName","lineNumber","columnNumber","Provider","value","_c","useAuth","_s2","$RefreshReg$"],"sources":["/Users/eminecetin/Downloads/flightFront-main/src/contexts/AuthContext.js"],"sourcesContent":["import { useState, createContext, useContext, useEffect } from \"react\";\n\nimport { Flex, Spinner } from \"@chakra-ui/react\";\nimport { fetchLogout, fetchMe } from \"../api\";\n\nconst AuthContext = createContext();\n\nconst AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    let isMounted = true;\n\n    const fetchData = async () => {\n      try {\n        const me = await fetchMe();\n\n        if (isMounted) {\n          setLoggedIn(true);\n          setUser(me);\n          setLoading(false);\n        }\n      } catch (e) {\n        if (isMounted) {\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchData();\n\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  const login = (data) => {\n    setLoggedIn(true);\n    setUser(data);\n\n    localStorage.setItem('access-token', data.accessToken);\n    localStorage.setItem('refresh-token', data.refreshToken);\n  };\n\n  const logout = async () => {\n    setLoggedIn(false);\n    setUser(null);\n\n    await fetchLogout();\n\n    localStorage.removeItem('access-token');\n    localStorage.removeItem('refresh-token');\n  };\n\n  const values = {\n    loggedIn,\n    user,\n    login,\n    logout,\n  };\n\n  if (loading) {\n    return (\n      <Flex justifyContent=\"center\" alignItems=\"center\" height=\"100vh\">\n        <Spinner thickness=\"4px\" speed=\"0.65s\" emptyColor=\"gray.200\" size=\"xl\" color=\"red.500\" />\n      </Flex>\n    );\n  }\n\n  return <AuthContext.Provider value={values}>{children}</AuthContext.Provider>;\n};\n\nconst useAuth = () => useContext(AuthContext);\n\nexport { AuthProvider, useAuth };\n"],"mappings":";;;AAAA,SAASA,QAAQ,EAAEC,aAAa,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAEtE,SAASC,IAAI,EAAEC,OAAO,QAAQ,kBAAkB;AAChD,SAASC,WAAW,EAAEC,OAAO,QAAQ,QAAQ;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9C,MAAMC,WAAW,gBAAGT,aAAa,CAAC,CAAC;AAEnC,MAAMU,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACrC,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACgB,QAAQ,EAAEC,WAAW,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACkB,OAAO,EAAEC,UAAU,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EAE5CG,SAAS,CAAC,MAAM;IACd,IAAIiB,SAAS,GAAG,IAAI;IAEpB,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF,MAAMC,EAAE,GAAG,MAAMf,OAAO,CAAC,CAAC;QAE1B,IAAIa,SAAS,EAAE;UACbH,WAAW,CAAC,IAAI,CAAC;UACjBF,OAAO,CAACO,EAAE,CAAC;UACXH,UAAU,CAAC,KAAK,CAAC;QACnB;MACF,CAAC,CAAC,OAAOI,CAAC,EAAE;QACV,IAAIH,SAAS,EAAE;UACbD,UAAU,CAAC,KAAK,CAAC;QACnB;MACF;IACF,CAAC;IAEDE,SAAS,CAAC,CAAC;IAEX,OAAO,MAAM;MACXD,SAAS,GAAG,KAAK;IACnB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMI,KAAK,GAAIC,IAAI,IAAK;IACtBR,WAAW,CAAC,IAAI,CAAC;IACjBF,OAAO,CAACU,IAAI,CAAC;IAEbC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEF,IAAI,CAACG,WAAW,CAAC;IACtDF,YAAY,CAACC,OAAO,CAAC,eAAe,EAAEF,IAAI,CAACI,YAAY,CAAC;EAC1D,CAAC;EAED,MAAMC,MAAM,GAAG,MAAAA,CAAA,KAAY;IACzBb,WAAW,CAAC,KAAK,CAAC;IAClBF,OAAO,CAAC,IAAI,CAAC;IAEb,MAAMT,WAAW,CAAC,CAAC;IAEnBoB,YAAY,CAACK,UAAU,CAAC,cAAc,CAAC;IACvCL,YAAY,CAACK,UAAU,CAAC,eAAe,CAAC;EAC1C,CAAC;EAED,MAAMC,MAAM,GAAG;IACbhB,QAAQ;IACRF,IAAI;IACJU,KAAK;IACLM;EACF,CAAC;EAED,IAAIZ,OAAO,EAAE;IACX,oBACET,OAAA,CAACL,IAAI;MAAC6B,cAAc,EAAC,QAAQ;MAACC,UAAU,EAAC,QAAQ;MAACC,MAAM,EAAC,OAAO;MAAAvB,QAAA,eAC9DH,OAAA,CAACJ,OAAO;QAAC+B,SAAS,EAAC,KAAK;QAACC,KAAK,EAAC,OAAO;QAACC,UAAU,EAAC,UAAU;QAACC,IAAI,EAAC,IAAI;QAACC,KAAK,EAAC;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACrF,CAAC;EAEX;EAEA,oBAAOnC,OAAA,CAACC,WAAW,CAACmC,QAAQ;IAACC,KAAK,EAAEd,MAAO;IAAApB,QAAA,EAAEA;EAAQ;IAAA6B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAuB,CAAC;AAC/E,CAAC;AAAC/B,EAAA,CAjEIF,YAAY;AAAAoC,EAAA,GAAZpC,YAAY;AAmElB,MAAMqC,OAAO,GAAGA,CAAA;EAAAC,GAAA;EAAA,OAAM/C,UAAU,CAACQ,WAAW,CAAC;AAAA;AAACuC,GAAA,CAAxCD,OAAO;AAEb,SAASrC,YAAY,EAAEqC,OAAO;AAAG,IAAAD,EAAA;AAAAG,YAAA,CAAAH,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}